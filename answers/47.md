```sql
WITH cte AS (
    SELECT country, c.class, result
    FROM Classes c
    JOIN (
        SELECT COALESCE(s.class, o.ship) AS class, result
        FROM Outcomes o
        LEFT JOIN Ships s
        ON o.ship = s.name
    ) AS os
    ON c.class = os.class
)
SELECT country
FROM cte
GROUP BY country
HAVING COUNT('any') = (
    SELECT COUNT('any') FROM cte c2
    WHERE c2.result = 'sunk' AND c2.country = cte.country
)
```

```sql
WITH cte AS (
    SELECT country, c.class, result
    FROM Classes c
    LEFT JOIN (
        SELECT COALESCE(s.class, o.ship) AS class, result
        FROM Outcomes o
        LEFT JOIN Ships s
        ON o.ship = s.name
    ) AS os
    ON c.class = os.class
)
SELECT country
FROM cte
GROUP BY country
HAVING COUNT('any') = (
    SELECT COUNT('any') FROM cte c2
    WHERE c2.result = 'sunk' AND c2.country = cte.country
)
```